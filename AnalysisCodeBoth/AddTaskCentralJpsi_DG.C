AliAnalysisTaskCentralJpsi_DG *AddTaskCentralJpsi_DG()
{
    TString name = "CentralJpsi2018";
    // get the current analysis manager
    AliAnalysisManager *mgr = AliAnalysisManager::GetAnalysisManager();
    if (!mgr) {
        return 0;
    }
    // check the analysis type using the event handlers connected to the analysis manager
    if (!mgr->GetInputEventHandler()) {
        return 0;
    }
    // get the name of the file that is created
    TString fileName = AliAnalysisManager::GetCommonFileName();
    // create a subfolder in the file
    fileName += ":AnalysisOutput";      
    // now we create an instance of your task
    AliAnalysisTaskCentralJpsi_DG* task = new AliAnalysisTaskCentralJpsi_DG(name.Data());   
    if(!task) return 0;
    // if MC
    Bool_t isMC = kFALSE;
    if(mgr->GetMCtruthEventHandler()) isMC = kTRUE;
    task->SetIsMC(isMC);
    // add task to the manager
    mgr->AddTask(task);
    // connect the manager to the task
    mgr->ConnectInput(task,0,mgr->GetCommonInputContainer());
    // same for the output
    mgr->ConnectOutput(task,1,mgr->CreateContainer("fTreeJpsi", TTree::Class(), AliAnalysisManager::kOutputContainer, fileName.Data()));
    mgr->ConnectOutput(task,2,mgr->CreateContainer("fTreeJpsiMCGen", TTree::Class(), AliAnalysisManager::kOutputContainer, fileName.Data()));
    mgr->ConnectOutput(task,3,mgr->CreateContainer("fOutputList", TList::Class(), AliAnalysisManager::kOutputContainer, fileName.Data()));

    return task;
}
